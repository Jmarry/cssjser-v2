/*
 * CssJserBlog
 * v0.0.1
 * 2014-04-22
 **/
define(["utils/notification","utils/regExps"],function(a){var b=a("utils/notification"),c=a("jquery"),d=a("utils/regExps"),e=new b.Message,f=b.MessageTypes;c("#login").on("submit",function(){var a=c(this.email).val(),b=c(this.password).val();return a?d.email.test(a)?b?(c.ajax({url:"/login",type:"post",dataType:"json",data:{email:a,password:b},headers:{"X-CSRF-Token":c("meta[name='csrf-param']").attr("content")},success:function(a){window.location.href=a.redirect},error:function(a){var b="";try{b=c.parseJSON(a.response).error}catch(d){b=a}e.show({type:f.error,info:b})}}),!1):(e.show({type:f.error,info:"密码不能为空"}),!1):(e.show({type:f.error,info:"邮箱格式不正确"}),!1):(e.show({type:f.error,info:"邮箱不能为空"}),!1)})});