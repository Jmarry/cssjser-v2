/*
 * CssJserBlog
 * v0.0.1
 * 2014-04-22
 **/
!function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";"object"!=typeof a&&(a=a("../../lib/codemirror")),a.defineMode("xml",function(b,c){function d(a,b){function c(c){return b.tokenize=c,c(a,b)}var d=a.next();if("<"==d){if(a.eat("!"))return a.eat("[")?a.match("CDATA[")?c(g("atom","]]>")):null:a.match("--")?c(g("comment","-->")):a.match("DOCTYPE",!0,!0)?(a.eatWhile(/[\w\._\-]/),c(h(1))):null;if(a.eat("?"))return a.eatWhile(/[\w\._\-]/),b.tokenize=g("meta","?>"),"meta";var f=a.eat("/");v="";for(var i;i=a.eat(/[^\s\u00a0=<>\"\'\/?]/);)v+=i;return y.caseFold&&(v=v.toLowerCase()),v?(w=f?"closeTag":"openTag",b.tokenize=e,"tag"):"tag error"}if("&"==d){var j;return j=a.eat("#")?a.eat("x")?a.eatWhile(/[a-fA-F\d]/)&&a.eat(";"):a.eatWhile(/[\d]/)&&a.eat(";"):a.eatWhile(/[\w\.\-:]/)&&a.eat(";"),j?"atom":"error"}return a.eatWhile(/[^&<]/),null}function e(a,b){var c=a.next();if(">"==c||"/"==c&&a.eat(">"))return b.tokenize=d,w=">"==c?"endTag":"selfcloseTag","tag";if("="==c)return w="equals",null;if("<"==c){b.tokenize=d,b.state=l,b.tagName=b.tagStart=null;var e=b.tokenize(a,b);return e?e+" error":"error"}return/[\'\"]/.test(c)?(b.tokenize=f(c),b.stringStartCol=a.column(),b.tokenize(a,b)):(a.eatWhile(/[^\s\u00a0=<>\"\']/),"word")}function f(a){var b=function(b,c){for(;!b.eol();)if(b.next()==a){c.tokenize=e;break}return"string"};return b.isInAttribute=!0,b}function g(a,b){return function(c,e){for(;!c.eol();){if(c.match(b)){e.tokenize=d;break}c.next()}return a}}function h(a){return function(b,c){for(var e;null!=(e=b.next());){if("<"==e)return c.tokenize=h(a+1),c.tokenize(b,c);if(">"==e){if(1==a){c.tokenize=d;break}return c.tokenize=h(a-1),c.tokenize(b,c)}}return"meta"}}function i(a,b,c){this.prev=a.context,this.tagName=b,this.indent=a.indented,this.startOfLine=c,(y.doNotIndent.hasOwnProperty(b)||a.context&&a.context.noIndent)&&(this.noIndent=!0)}function j(a){a.context&&(a.context=a.context.prev)}function k(a,b){for(var c;;){if(!a.context)return;if(c=a.context.tagName,!y.contextGrabbers.hasOwnProperty(c)||!y.contextGrabbers[c].hasOwnProperty(b))return;j(a)}}function l(a,b,c){if("openTag"==a)return c.tagName=v,c.tagStart=b.column(),o;if("closeTag"==a){var d=!1;return c.context?c.context.tagName!=v&&(y.implicitlyClosed.hasOwnProperty(c.context.tagName)&&j(c),d=!c.context||c.context.tagName!=v):d=!0,d&&(x="error"),d?n:m}return l}function m(a,b,c){return"endTag"!=a?(x="error",m):(j(c),l)}function n(a,b,c){return x="error",m(a,b,c)}function o(a,b,c){if("word"==a)return x="attribute",p;if("endTag"==a||"selfcloseTag"==a){var d=c.tagName,e=c.tagStart;return c.tagName=c.tagStart=null,"selfcloseTag"==a||y.autoSelfClosers.hasOwnProperty(d)?k(c,d):(k(c,d),c.context=new i(c,d,e==c.indented)),l}return x="error",o}function p(a,b,c){return"equals"==a?q:(y.allowMissing||(x="error"),o(a,b,c))}function q(a,b,c){return"string"==a?r:"word"==a&&y.allowUnquoted?(x="string",o):(x="error",o(a,b,c))}function r(a,b,c){return"string"==a?r:o(a,b,c)}var s=b.indentUnit,t=c.multilineTagIndentFactor||1,u=c.multilineTagIndentPastTag;null==u&&(u=!0);var v,w,x,y=c.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1},z=c.alignCDATA;return{startState:function(){return{tokenize:d,state:l,indented:0,tagName:null,tagStart:null,context:null}},token:function(a,b){if(!b.tagName&&a.sol()&&(b.indented=a.indentation()),a.eatSpace())return null;v=w=null;var c=b.tokenize(a,b);return(c||w)&&"comment"!=c&&(x=null,b.state=b.state(w||c,a,b),x&&(c="error"==x?c+" error":x)),c},indent:function(b,c,f){var g=b.context;if(b.tokenize.isInAttribute)return b.stringStartCol+1;if(g&&g.noIndent)return a.Pass;if(b.tokenize!=e&&b.tokenize!=d)return f?f.match(/^(\s*)/)[0].length:0;if(b.tagName)return u?b.tagStart+b.tagName.length+2:b.tagStart+s*t;if(z&&/<!\[CDATA\[/.test(c))return 0;for(g&&/^<\//.test(c)&&(g=g.prev);g&&!g.startOfLine;)g=g.prev;return g?g.indent+s:0},electricChars:"/",blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:c.htmlMode?"html":"xml",helperType:c.htmlMode?"html":"xml"}}),a.defineMIME("text/xml","xml"),a.defineMIME("application/xml","xml"),a.mimeModes.hasOwnProperty("text/html")||a.defineMIME("text/html",{name:"xml",htmlMode:!0})});