/*
 * CssJserBlog
 * v0.0.1
 * 2014-04-22
 **/
define(function(a){var b,c,d;b=a("jquery"),d=function(a,d){return setTimeout(function(){return b(a).find("img").each(function(a,b){return c(b.src,d)})},1)},c=function(a,b){var c;return c=new Image,c.onload=function(){var a,d,e;a=document.createElement("canvas"),a.width=c.width,a.height=c.height,d=a.getContext("2d"),d.drawImage(c,0,0,a.width,a.height),e=null;try{e=a.toDataURL("image/png")}catch(f){}return e?b({dataURL:e,width:c.width,height:c.height}):void 0},c.src=a},b.paste=function(){var a;return a=document.createElement("div"),a.contentEditable=!0,b(a).css({width:1,height:1,position:"fixed",left:-100,overflow:"hidden"}).on("paste",function(e){var f,g,h,i,j,k,l,m,n,o;if(null!=(null!=(l=e.originalEvent)?l.clipboardData:void 0))if(f=e.originalEvent.clipboardData,f.items)for(m=f.items,j=0,k=m.length;k>j;j++)g=m[j],g.type.match(/^image\//)&&(h=new FileReader,h.onload=function(d){return c(d.target.result,function(c){return b(a).trigger("pasteImage",c)})},h.readAsDataURL(g.getAsFile())),"text/plain"===g.type&&g.getAsString(function(c){return b(a).trigger("pasteText",{text:c})});else f.types.length?(null!=(n=i=f.getData("Text"))?n.length:void 0)&&b(a).trigger("pasteText",{text:i}):d(a,function(c){return b(a).trigger("pasteImage",c)});return(f=window.clipboardData)&&((null!=(o=i=f.getData("Text"))?o.length:void 0)?b(a).trigger("pasteText",{text:i}):d(a,function(c){return b(a).trigger("pasteImage",c)})),setTimeout(function(){return b(a).html("")},2)}),b(a)}});