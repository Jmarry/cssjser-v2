/*
 * CssJserBlog
 * v0.0.1
 * 2014-04-22
 **/
define(["utils/dropdown","utils/notification","utils/regExps"],function(a){var b=(a("utils/dropdown"),a("utils/notification")),c=a("utils/regExps"),d=a("jquery"),e=new b.Message,f=d("#setting-general");d(document).on("click",".button-save",function(){var a=f.find("#blog-title").val(),g=f.find("#blog-description").val(),h=f.find("#blog-email").val();return c.email.test(h)?(d.ajax({url:"/api/basicSetting/update",type:"post",dataType:"json",data:{title:a,description:g,email:h},headers:{"X-CSRF-Token":d("meta[name='csrf-param']").attr("content")},success:function(a){a.success&&e.show({type:b.MessageTypes.success,info:"保存成功"})},error:function(a){var b="";try{b=d.parseJSON(a.response).error}catch(c){b=a}e.show({type:MessageTypes.error,info:b})}}),!1):e.show({type:b.MessageTypes.error,info:"邮箱格式不正确"})})});